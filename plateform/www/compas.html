<!DOCTYPE html>

<html>
    <head>
       
        <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;">
        <meta name="format-detection" content="telephone=yes">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <link rel="stylesheet" type="text/css" href="css/ratchet.min.css">
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <title>plateforme</title>
    </head>
    <body>
            <nav class="bar bar-tab">
              <a class="tab-item" href="index.html">
                <span class="icon icon-home"></span>
                <span class="tab-label">Home</span>
              </a>
              <a class="tab-item  active" href="#">
                <span class="icon icon-person"></span>
                <span class="tab-label">Compas</span>
              </a>
              <a class="tab-item" href="camera.html">
                <span class="icon icon-star-filled"></span>
                <span class="tab-label">Camera</span>
              </a>
              <a class="tab-item" href="vibration.html">
                <span class="icon icon-search"></span>
                <span class="tab-label">vibration</span>
              </a>
              <a class="tab-item" href="battery.html">
                <span class="icon icon-gear"></span>
                <span class="tab-label">Battery</span>
              </a>
            </nav>

            <header class="bar bar-nav">
                <h1 class="title">Compat</h1>
            </header>
          
            <button class="btn btn-primary" id = "get">recuperer l'orientation</button>
            <button class="btn btn-default" id = "watch">suivre l'orientation</button>

            
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/ratchet.min.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
          plateform.nom = "compas"
          plateform.compas = function (argument) {
            document.getElementById("get").addEventListener("click", function (argument) {
                navigator.compass.getCurrentHeading(compassSuccess, compassError);
                function compassSuccess(heading) {
                  alert('Heading: ' + heading.magneticHeading);
               };

               function compassError(error) {
                  alert('CompassError: ' + error.code);
               };
            });
            document.getElementById("watch").addEventListener("click", function (argument) {
                var compassOptions = {
                frequency: 3000
            }
                var watchID = navigator.compass.watchHeading(compassSuccess, 
                compassError, compassOptions);

               function compassSuccess(heading) {
                  alert('Heading: ' + heading.magneticHeading);

                  setTimeout(function() {
                     navigator.compass.clearWatch(watchID);
                  }, 10000);
                };

               function compassError(error) {
                  alert('CompassError: ' + error.code);
               };});}
          plateform.compas()
        </script>

    </body>
</html>
